{% extends "base.html" %}
{% load CustomFilter %}

{% block content %}

   <h3>Yourcart</h3>

   {% for item  in items  %}
              <h1>Quantity::{{item.quantity}}</h1>

              <form action="{% url 'updateCart' cartItemId=item.id%}">

               <button type="button" onclick="updateQuantity('{{item.id}}',-1)">-</button>
               <input type="number" name="quantity" id="quantity-{{item.id}}" value="{{item.quantity}}" min="0">
               <button type="button" onclick="updateQuantity('{{item.id}}',1)">+</button>
     
               <button type="submit" class="btn btn-primary">
                        Update
             </button> 
     
           </form>

            <button><a href="{% url 'deleteCartItem' cartItemId=item.id %}">Delete</a></button>


            <script>
     
             function updateQuantity(productId,operation)
             {
               var quantityInput=document.getElementById("quantity-"+productId);
               var currentQuantity=parseInt(quantityInput.value);
     
               var newQuantity=currentQuantity+operation;
               quantityInput.value=newQuantity;
     
             }
            
     
            </script>
    {% include 'cartproduct.html' with p=item.products%}
        
   {% endfor %} 

    <table border="1" cellpadding="50">

      
     <tr>

      <th>Product Id</th>
      <th>Product Name</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Amount</th>


    </tr>
      
  {% for item in items  %}

  <tr>

    <th>{{item.products.id}}</th>
    <th>{{item.products.pro_name}}</th>
    <th>{{item.quantity}}</th>
    <th>{{item.products.pro_Price}}</th>
    <th>{{item.products.pro_Price|multiply:item.quantity}}</th>


  </tr>

          
  {% endfor %}

   <tr>
    <th colspan=5><h1>Final Amount To Pay:{{finalAmount}}
      <button type="button" class="btn btn-primary"> </button> 
        <button><a href="{% url 'checkout'  %}">Checkout</a></button>

      

    </h1>
  </th>
     

    

   </tr>




    </table>
   
{% endblock %}